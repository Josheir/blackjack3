<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blacjack</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body onunload = "deleteArray()">
    <!-- Script -->
    <script src="script.js"></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>





<div id ="alternateContainer">

    <div id = "item" ><h1>Your display is to small for this site.</h1></div>

</div>


<div id = "forFlex">


<div id="container">

    
    <div id = "headerContainer" > 
        <div id="title">BLACKJACK</div>
        <div id = "scoreAtTop">30</div>    
    </div>   
        
        
    <canvas id="canvasDealer" width="500" height="78" ></canvas>
    <div>&nbsp</div>
    <div>&nbsp</div>
    
    <div>
        <canvas id="canvasPlayer1" width="500" height="78"></canvas> 
        <br><br><br>
        <div id = "interfaceRow2">
            
            <div id = "MessageUnderRow2"><b>-</div>
           
            
                <div id = "containsUpperButtons">
                    <br><br>
                    <input id = "drawCardBtnUpper" type="button" value="Draw Card" >
                    <input id = "dealCardsBtn" type="button" value="Deal" >
                    <input id = "newRoundBtn" type="button" value="New Round" >
                    <input id = "wagerButtonOne" type="button" value="Wager 1" onclick="wager(1)" >
                    <input id = "wagerButtonFive" type="button" value="Wager 5" onclick="wager(5)" >
                    <input id = "wagerButtonFifteen" type="button" value="Wager 15" onclick="wager(15)" >
                    <input id = "wagerButtonTwentyfive" type="button" value="Wager 25" onclick="wager(25)" >
                <br><br>
                
                </div>

                

                
            
        </div>
    </div>
    <canvas id="canvasPlayer2" width="500" height="78" ></canvas>

    
        <div id = "messageLower" ><b>-</div>
    
        
            <br>
        <input id = "drawCardBtnLower" type="button" value="Draw Card" onclick = "drawPlayerCardRow3(0)"  >
        <input id = "split" type="button" value="Double Down" >
      
       
        
    

    </div>

 </div>   
    


    


<script>


//amt between cards 
const CARDGAP = 70;
//five decks
const AMTOFCARDS = (52*5 - 1);

document.getElementById('canvasPlayer2').style.visibility = 'hidden';
document.getElementById('messageLower').style.visibility = 'hidden';
document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
document.getElementById('split').style.visibility = 'hidden';


var canvasDealer = document.getElementById("canvasDealer");
let canvasPlayer1 = document.getElementById("canvasPlayer1");
let canvasPlayer2 = document.getElementById("canvasPlayer2");

let multiplierRow1 = -1;
let initialXRow1 = 150;
let dealerHandTotal = 0;
let clearRectFlag = false;
let isAllDelt = false;
let playerScoreRow2 = 0;
let playerScoreRow3 = 0;





let ctx1 = canvasDealer.getContext("2d");



function drawDealerCards(){

    alert("in here");
    document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
    drawCardBtnUpper.disabled = true;
    drawCardBtnUpper.disabled = true;
    newRoundBtn.disabled = false;

    
    IsASplitFlag = false;
    
    clearRectFlag = true;
    
    
   
   
   
    while (dealerHandTotal < 17)
    {
        multiplierRow1++;
        let mark  = getMarkOfCard();

        if (mark == "Q" || mark == "K" || mark == "Q" || mark == "J" || mark == "10")
        {
            dealerHandTotal = dealerHandTotal + 10;
        }
        else if (mark == "A")
        {
            dealerHandTotal = dealerHandTotal + 1;
        }
        else
        {
            console.log("mark" , mark);
            dealerHandTotal = dealerHandTotal + parseInt(mark);
        }
        console.log("dealerHandTotal", dealerHandTotal);

        ctx1.beginPath();
        ctx1.fillStyle='red';
        ctx1.rect((initialXRow1) +  multiplierRow1 * CARDGAP, 7 , 50, 64);
        ctx1.stroke();
        ctx1.font = "50px Arial";


        if(mark == "10"){
            ctx1.fillText(mark, initialXRow1 + multiplierRow1 * CARDGAP-4,  60 );
        }
        else{
            ctx1.fillText(mark, initialXRow1 + multiplierRow1 * CARDGAP+10,  60 );
        }


    }

    if (dealerHandTotal > 21)
    {
        //BUST
        pointsHave = pointsHave + (pointsWagered);
        let text = `DEALER BUSTS!  YOU WIN ${pointsWagered} POINT`;
        document.getElementById("MessageUnderRow2").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;


        
    }
    
    else if (dealerHandTotal > playerScoreRow2)
    {
        //DEALER WINS
        pointsHave = pointsHave - (pointsWagered);
        let text = `DEALER WINS!  YOU LOSE ${pointsWagered} POINT`;
        document.getElementById("MessageUnderRow2").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
    }
    else 
    {
        //PLAYER WINS
        pointsHave = pointsHave + (pointsWagered);
        let text = `YOU WIN!  ${pointsWagered} POINT`;
        document.getElementById("MessageUnderRow2").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
    }

    ////////////

    //dealer

    /*
    if (dealerHandTotal > 21 &&  isThereASecondDeal == true)
    {
        //BUST
        document.getElementById("MessageLower").style.visibility = 'visible';
        pointsHave = pointsHave + (pointsWagered);
        let text = `DEALER BUSTS!  YOU WIN ${pointsWagered} POINTS - SCORE: ${pointsHave}`;
        document.getElementById("MessageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;

        
        
    }
    
    
    else if (dealerHandTotal > playerScoreRow3 &&  isThereASecondDeal == true)
    {
        //DEALER WINS
        document.getElementById("MessageLower").style.visibility = 'visible';
        pointsHave = pointsHave - (pointsWagered);
        let text = `DEALER WINS!  YOU LOSE ${pointsWagered} POINTS - SCORE: ${pointsHave}`;
        document.getElementById("MessageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
    }
    else if (isThereASecondDeal == true)
    {
        //PLAYER WINS
        document.getElementById("MessageLower").style.visibility = 'visible';
        pointsHave = pointsHave + (pointsWagered);
        let text = `YOU WIN!  ${pointsWagered} POINTS - SCORE: ${pointsHave}`;
        document.getElementById("MessageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
    }
*/
    //////////////

    
    isAllDelt = true;
    setMessageLower();
    
    //player
    counterAcesRow1 = -1;
    
    multiplierRow1 = -1;
    initialXRow1 = 150;
    dealerHandTotal = 0;
    
    dealCardsBtn.disabled = true;

}




//variable for final row 3 (split deck)
let AreThereAcesArrayRow2 = ["no ace","no ace","no ace","no ace"]; 
let pointsHave = 30;
let pointsWagered = 0;
//temporary for testing split
let globvar = 1;
let IsASplitFlag = false;
let turnNoReset = 0;
let  gWasASplitFlag = false;
let multiplierRow2 = -1;
let initialXRow2 = 150;
var counterAcesRow2 = -1;
let numberOfIterationsRow2 = 0;
let numberOfCardsDeltRow2 = 0;
let areBothDealsComplete = "noneAre";
let isThereISecondDeal = false;
let FirstDealIsDoneFlag = false; 
let SecondDealIsDoneFlag = false;
let ctx2 = canvasPlayer1.getContext("2d");




function drawPlayerCardRow2()
{

    /////


    if (FirstDealIsDoneFlag == true)
    {
        return(-1);
    }
    

    /*
    if(drawCardBtnUpper.disabled = true;)
        if(FirstDealIsDoneFlag == true && SecondDealIsDoneFlag == true)
        {
            drawCardBtnUpper.disabled = true;
            dealCardsBtn.disabled = true;
            return(1);
        } 
            
        
        

    if (FirstDealIsDoneFlag == true) 
    {
        drawCardBtnUpper.disabled = true;
        return(1);
        
    }

*/


    ///////

    
    turnNoReset++;
    numberOfIterationsRow2++;
    
    console.log("logging1");
    console.log(numberOfIterationsRow2);
    console.log(numberOfIterationsRow3);

    if( gWasASplitFlag == true && numberOfIterationsRow2 > 3 && numberOfIterationsRow3 > 1)
    {
        
        dealCardsBtn.disabled = false;
        console.log("logging2");
        console.log(numberOfIterationsRow2);
        console.log(numberOfIterationsRow3);
        
    }
    else{
       
        dealCardsBtn.disabled = true;
    }
    console.log("1:",gWasASplitFlag, numberOfIterationsRow2, numberOfIterationsRow3);

    document.getElementById('split').style.visibility = 'hidden';
    
   

   
    //let ctx1 = 
   
   
    //two tens dealt, and chose to display two stacks of decks
   if (IsASplitFlag === true )
   {
    ctx2.clearRect(0,0,1000,78);
    numberOfCardsDeltRow2 = 0;
    multiplierRow2 = - 1;
    playerScoreRow2 = 0;
    IsASplitFlag = false;

   }
    

   
    if (clearRectFlag == true)
    {

        //messageLower.style.hidden = 'true';
        //canvasPlayer2.style.hidden = 'true';
        //drawCardBtnLower.style.hidden = 'true';
        //split.style.hidden = 'true';
        document.getElementById('messageLower').style.visibility = 'hidden';
        document.getElementById('canvasPlayer2').style.visibility = 'hidden';
        document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
        document.getElementById('split').style.visibility = 'hidden';




        ctx1.clearRect(0,0,1000,78);
        ctx2.clearRect(0,0,1000,78);

        clearRectFlag = false;
    }
   
    multiplierRow2++;
    
    
    //for testing - SOME OF THIS IS NEEDED!!!!
    let mark = "";
    if(globvar == 1 || globvar == 2  )
    {
        mark = "10";
        globvar++;
       
    }
    else
    {
        mark  = getMarkOfCard();
    }

    console.log("mark", mark);

    //gDisplayATen = false;

    //ctx2 = canvasPlayer2.getContext("2d");
    ctx2.beginPath();
    ctx2.fillStyle='blue';
    ctx2.rect((initialXRow2) +  multiplierRow2 * CARDGAP, 7 , 50, 64);
    console.log("log:", (initialXRow2) +  multiplierRow2 * CARDGAP, multiplierRow2);
    ctx2.stroke();
    ctx2.font = "50px Arial";
    
    if (mark == "Q" || mark == "K" || mark == "Q" || mark == "J" || mark == "10")
    {
        numberOfCardsDeltRow2++;
        playerScoreRow2 = playerScoreRow2 + 10;
    }
    else if (mark == "A")
    {
        numberOfCardsDeltRow2++;
        counterAcesRow2 = counterAcesRow2 + 1;
        playerScoreRow2 = playerScoreRow2 + 11;
        AreThereAcesArrayRow2[counterAcesRow2] = "is ace";
    }
    else
    {
        playerScoreRow2 = playerScoreRow2 + parseInt(mark);
        numberOfCardsDeltRow2++;
    }


    

    

    //two cards dealt and both are tens - not split yet
    if(numberOfCardsDeltRow2 == 2 && playerScoreRow2 == 20 && turnNoReset == 2)
    {
        
        dealCardsBtn.disabled = false;
        document.getElementById('split').style.visibility = 'visible';
        IsASplitFlag = false;
        gWasASplitFlag = true;
        
        


    }


    if(playerScoreRow2 < 22 && numberOfCardsDeltRow2 == 5)
    {
        console.log("5 Card Charlie");
        pointsHave = pointsHave + (pointsWagered);

        //gTotalPoints= //gTotalPoints+ pointsWagered;

        let text = `5 CARDS!  YOU WIN ${pointsWagered} POINTS`;
        let text2 = `Total Points: ${pointsHave}.`;
        document.getElementById("MessageUnderRow2").textContent = text;
        document.getElementById("scoreAtTop").textContent = text2;
        FirstDealIsDoneFlag = true;
        //dealCardsBtn.disabled = false;
        //drawCardBtnUpper.disabled = true;
        checkEndOfHands();
        
    }
    
    else if (playerScoreRow2 > 21)
    {
        for(let i = 0 ; i < 4; i++)
        {
                if(AreThereAcesArrayRow2[i] == "is ace")
                {
                    AreThereAcesArrayRow2[i] == "used ace";
                    playerScoreRow2 = playerScoreRow2 - 10;
                    break;
                }
        }
    }

        if(playerScoreRow2 > 21)
        {
                    
                    pointsHave = pointsHave - pointsWagered;

                    //gTotalPoints= //gTotalPoints- pointsWagered;

                    let text = `BUST!  YOU LOSE ${pointsWagered} POINTS`;
                    document.getElementById("MessageUnderRow2").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    console.log("BUST!");
                    FirstDealIsDoneFlag = true;
                    //drawCardBtnUpper.disabled = true;


                    //if done, make newRoundBtn visible 
                    checkEndOfHands();
 
        }
            
        
    
    
    
    else if(playerScoreRow2 == 21)
    {
        console.log("Blackjack");
        dealCardsBtn.disabled = true;
        pointsHave = pointsHave + (pointsWagered*2)

        //gTotalPoints= //gTotalPoints+ pointsWagered * 2;

        let text = `BLACKJACK!  YOU WIN ${pointsWagered*2} POINTS`;
        document.getElementById("MessageUnderRow2").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave; 
        FirstDealIsDoneFlag = true;
        //dealCardsBtn.disabled = false;
        //drawCardBtnUpper.disabled = true;
        checkEndOfHands();
    }

    console.log("PlayerScore2", playerScoreRow2);




    if(mark == "10"){
        ctx2.fillText(mark, initialXRow2 + multiplierRow2 * CARDGAP-4,  60 );
    }
    else{
        ctx2.fillText(mark, initialXRow2 + multiplierRow2 * CARDGAP+10,  60 );
    }

   

}



let multiplierRow3 = -1;
let initialXRow3 = 150;
//let playerScoreRow3 = 0;
let totalCardsDeltRow3 = 0;
let numberOfIterationsRow3 = 0;
let AreThereAcesArrayRow3 = ["no ace","no ace","no ace","no ace"]; 
let counterAcesRow3 = 0;


function setLowerMessages()
{
    //isThereASecondDeal


}
let ctx3 = canvasPlayer2.getContext("2d");



function drawPlayerCardRow3(mark)
{
   
    isThereISecondDeal = true;
    //////
    
    
    /*
        //both hands are complete
        if(FirstDealIsDoneFlag == true && SecondDealIsDoneFlag == true)
        {
        drawCardBtnLower.disabled = true;
        dealCardsBtn.disabled = true;
        return(1);
        } 
            
        
        

        if (SecondDealIsDoneFlag == true) 
        {
            drawCardBtnLower.disabled = true;
            return(1);
            
        }
*/

    //////
    //if(SecondDealIsDoneFlag == true)
    //{
    //    return(-1);
    //}
   

   
    

//////////////////////////////////
//////////////////////////////////

numberOfIterationsRow3++;

if( gWasASplitFlag == true && numberOfIterationsRow2 > 3 && numberOfIterationsRow3 > 1)
    {
        //document.getElementById('dealCardsBtn').style.visibility = 'visible';
        dealCardsBtn.disabled = false;
        
    }
    else{
        //document.getElementById('dealCardsBtn').style.visibility = 'hidden';
        dealCardsBtn.disabled = true;
    }

    console.log("logging2");
    console.log(numberOfIterationsRow2);
    console.log(numberOfIterationsRow3);

    //console.log("2:",gWasASplitFlag, numberOfIterationsRow2, numberOfIterationsRow3);


if(mark === 0){

    mark  = getMarkOfCard();
}

    

   
    

   
    //if (clearRectFlag == true)
    //{

        //messageLower.style.hidden = 'true';
        //canvasPlayer2.style.hidden = 'true';
        //drawCardBtnLower.style.hidden = 'true';
        //split.style.hidden = 'true';
        document.getElementById('messageLower').style.visibility = 'visible';
        document.getElementById('canvasPlayer2').style.visibility = 'visible';
        document.getElementById('drawCardBtnLower').style.visibility = 'visible';
        //document.getElementById('split').style.visibility = 'visible';




    //    ctx1.clearRect(0,0,1000,78);
    //    ctx.clearRect(0,0,1000,78);
    //    clearRectFlag = false;
    //}
   
    multiplierRow3++;
    
    //gDisplayATen = false;

    ctx3 = canvasPlayer2.getContext("2d");
    ctx3.beginPath();
    ctx3.fillStyle='blue';
    ctx3.rect((initialXRow3) +  multiplierRow3 * CARDGAP, 7 , 50, 64);
    console.log("log:", (initialXRow3) +  multiplierRow3 * CARDGAP, multiplierRow3);
    ctx3.stroke();
    ctx3.font = "50px Arial";
    
    if (mark == "Q" || mark == "K" || mark == "Q" || mark == "J" || mark == "10")
    {
        totalCardsDeltRow3++;
        playerScoreRow3 = playerScoreRow3 + 10;
    }
    else if (mark == "A")
    {
        totalCardsDeltRow3++;
        counterAcesRow2 = counterAcesRow2 + 1;
        playerScoreRow3 = playerScoreRow3 + 11;
        AreThereAcesArrayRow3[counterAcesRow3] = "is ace";
        counterAcesRow3++;
    }
    else
    {
        playerScoreRow3 = playerScoreRow3 + parseInt(mark);
        totalCardsDeltRow3++;
    }

   

   setMessageLower();
    

    console.log("PlayerScore", playerScoreRow3);




    if(mark == "10"){
        ctx3.fillText(mark, initialXRow3 + multiplierRow3 * CARDGAP-4,  60 );
    }
    else{
        ctx3.fillText(mark, initialXRow3 + multiplierRow3 * CARDGAP+10,  60 );
    }

///////////////////////////////////
///////////////////////////////////


}



function setsUpGame()
{
    
   
    newRoundBtn.disabled = true;
    drawCardBtnUpper.disabled = true;
    dealCardsBtn.disabled = true;
    drawCardBtnUpper.disabled = true;

    
}


let deckUseage = 
[
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0


];

let decks = 
[
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10"
];






//finds a card as long as at least one card remains
function getMarkOfCard()
{
    let flagFoundCard = false;

    /////

   

    //import seedrandom = from './randomNumber';
    
    
    let randomNumber = new Math.seedrandom();

    
    
    randomNumber = randomNumber();
    //console.log("random", randomNumber);
   

    //change back to 260 to see if zeros display
    let betweenZeroand240 = randomNumber * 240;
    
    //console.log("random", 
    index = Math.trunc(betweenZeroand240);

    //console.log("card", betweenZeroand240);
    /////
    //let index = betweenZeroand240;
    console.log("card", index);  
    

    let i = 0;
    if(deckUseage[index] == 0)
    {
        deckUseage[index] = 1;
        return (decks[index]);
    }
    else
    {
        for(i = index - 1; i >= 0; i-- )
        {
            if (decks[i] == 0)
            {
                decks[i] =  1;
                flagFounCard = true;
                break;
            }
            

        }
        
        if (flagFoundCard == false)
        {
            for(i = index + 1 ; i < AMTOFCARDS-1 ; i++)
            {
                if (decks[i] = 0)
                {
                    decks[i] = 1;
                    break;
                }
            }
        }

        

        
    }
console.log("card", i);    
return (decks[i]);
}
 
//////
function setMessageLower()
{

    if (SecondDealIsDoneFlag == true)
    {
        return(-1);
    } 

    //works, goes here
    console.log("score", playerScoreRow3);


    //dealer wins
    if (playerScoreRow3 < 21 && (dealerHandTotal > playerScoreRow3) && isAllDelt == true)
    {
        pointsHave = pointsHave - (pointsWagered);
        document.getElementById('messageLower').style.visibility = 'visible';
        let text = `DEALER WINS! YOU LOSE ${pointsWagered} POINT`;
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        SecondDealIsDoneFlag = true;
        checkEndOfHands();
        


    }
    //dealer loses
    else if(playerScoreRow3 < 21 && (dealerHandTotal < playerScoreRow3) && isAllDelt == true)
    {
        pointsHave = pointsHave + (pointsWagered);
        document.getElementById('messageLower').style.visibility = 'visible';
        let text = `DEALER LOSES! YOU WIN ${pointsWagered} POINT`;
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        SecondDealIsDoneFlag = true;
        checkEndOfHands();
    }
    //dealer loses
    else if(playerScoreRow3 < 22 && totalCardsDeltRow3 == 5)
    {
        pointsHave = pointsHave + (pointsWagered*2);
        console.log("5 Card Charlie");
        document.getElementById("messageLower").style.visibility = 'visible';
        pointsHave = pointsHave + (pointsWagered);
        let text = `DEALER LOSES!  5 CARDS!  YOU WIN ${pointsWagered*2} POINTS`;
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        SecondDealIsDoneFlag = true;
        //document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
        checkEndOfHands();

    }
    

    else if (playerScoreRow3 > 21)
    {
        for(let i = 0 ; i < 4; i++)
        {
                if(AreThereAcesArrayRow3[i] == "is ace")
                {
                    AreThereAcesArrayRow3[i] == "used ace";
                    playerScoreRow3 = playerScoreRow3 - 10;
                    break;
                }
        }
    }




        //dealer wins
        if(playerScoreRow3 > 21)
        {   
            document.getElementById("messageLower").style.visibility = 'visible';
                    pointsHave = pointsHave - pointsWagered;
                    //gTotalPoints= //gTotalPoints- pointsWagered;

                    let text = `DEALER WINS! BUST!  YOU LOSE ${pointsWagered} POINT`;
                    document.getElementById("messageLower").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave;
                    SecondDealIsDoneFlag = true;
                    checkEndOfHands();
                    console.log("BUST!");
                   
                    
                    
                    
                    if (!IsASplitFlag){
                    //drawCardBtnUpper.disabled = true;
                    }

                    //document.getElementById('drawCardBtnLower').style.visibility = 'hidden';

        }
            
        
    
    
     //dealer loses
    else if(playerScoreRow3 == 21)
    {  
        document.getElementById("messageLower").style.visibility = 'visible';
        console.log("Blackjack");
        dealCardsBtn.disabled = true;
        pointsHave = pointsHave + (pointsWagered*2);

        //gTotalPoints= //gTotalPoints+ pointsWagered*2;
        
        let text = `DEALER LOSES! BLACKJACK!  YOU WIN ${pointsWagered*2} POINTS`;
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
        SecondDealIsDoneFlag = true;
        checkEndOfHands();
 
    }



}

//////
function dealDealer(){

} 

function wager(points_Wagered){

if(points_Wagered > pointsHave)
{
    return(1);
}
pointsWagered =  points_Wagered;

drawCardBtnUpper.disabled = false;
wagerButtonOne.disabled=true;
wagerButtonFive.disabled=true;
wagerButtonFifteen.disabled=true;
wagerButtonTwentyfive.disabled=true;

}

function unhidePlayerRow2(){
   
    IsASplitFlag = true;
    WasASplitFlag = true;

    document.getElementById('split').style.visibility = 'hidden';
    document.getElementById('canvasPlayer2').style.visibility = 'visible';
    document.getElementById('messageLower').style.visibility = 'visible';
    document.getElementById('drawCardBtnLower').style.visibility = 'visible';
    
    isThereASecondDeal = true;
    drawPlayerCardRow3(10);
    drawPlayerCardRow2();
    
}

function newRound(){
//temporary for testing split
 globvar = 1;
 alert("clearing");

 ctx1.clearRect(0,0,1000,78);
 ctx2.clearRect(0,0,1000,78);
 ctx3.clearRect(0,0,1000,78);
 
 
 //messageLower.disabled = true;
 //messageUnderRow2.disabled = true;
 
 newRoundBtn.disabled = true;
 
 document.getElementById('messageLower').style.visibility = 'hidden';
 document.getElementById('MessageUnderRow2').style.visibility = 'hidden';


wagerButtonOne.disabled=false;
wagerButtonFive.disabled=false;
wagerButtonFifteen.disabled=false;
wagerButtonTwentyfive.disabled=false;
 
 
 multiplierRow1 = -1;
 initialXRow1 = 150;
 dealerHandTotal = 0;
 clearRectFlag = false;
 isAllDelt = false;
 playerScoreRow2 = 0;
 playerScoreRow3 = 0;

 AreThereAcesArrayRow2 = ["no ace","no ace","no ace","no ace"]; 
 pointsHave = 30;
 pointsWagered = 0;
 IsASplitFlag = false;
 turnNoReset = 0;
 gWasASplitFlag = false;
 multiplierRow2 = -1;
 initialXRow2 = 150;
 counterAcesRow2 = -1;
 numberOfIterationsRow2 = 0;
 numberOfCardsDeltRow2 = 0;
 areBothDealsCompe = "noneAre";
 isThereASecondDeal = false;

 multiplierRow3 = -1;
 initialXRow3 = 150;
//let playerScoreRow3 = 0;
 totalCardsDeltRow3 = 0;
 numberOfIterationsRow3 = 0;
 AreThereAcesArrayRow3 = ["no ace","no ace","no ace","no ace"]; 
 counterAcesRow3 = 0;

 FirstDealIsDoneFlag = false;
 SecondDealIsDoneFlag = false;

 isThereISecondDeal = false;


}

function playWave()
{
    const music = new Audio('adf.wav');
    
    music.play();
}

setsUpGame();


function checkEndOfHands()
{
    if(isThereISecondDeal)
    {
        if (FirstDealIsDoneFlag && SecondDealIsDoneFlag )
        {
            newRoundBtn.disabled = false;
            drawCardBtnLower.disabled = true;
            drawCardBtnUpper.disabled = true;
            dealCardsBtn.disabled = true;
        }
        else if(SecondDealIsDoneFlag)
        {
        
                drawCardBtnLower.disabled = true;
                
        }
    }

    else if(!isThereISecondDeal)
    {
    
    
        if (FirstDealIsDoneFlag == true)
        {
            drawCardBtnUpper.disabled = true;
            newRoundBtn.disabled = false;
            
        }
    }

}


document.getElementById("drawCardBtnUpper").addEventListener("click", drawPlayerCardRow2);
document.getElementById("dealCardsBtn").addEventListener("click", drawDealerCards);
document.getElementById("split").addEventListener("click", unhidePlayerRow2);
document.getElementById("newRoundBtn").addEventListener("click", newRound);



</script>

</body>











</html>