<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body onunload = "deleteArray()">
    <!-- Script -->
    <script src="script.js"></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>







    <div id = "alternateContainer" ><h1>Your display is to small for this site.</h1></div>



<div id = "forFlex">


<div id="container">

    
    <div id = "headerContainer" > 
        <div id="title">BLACKJACK 5 card dealer</div>
        <div id = "scoreAtTop">30</div>    
    </div>   
        
        
    <canvas id="canvasDealer" width="500" height="78" ></canvas>
    <div>&nbsp</div>
    <div>&nbsp</div>
    
    <div>
        <canvas id="canvasPlayer1" width="500" height="78"></canvas> 
        <br>
        <div id = "interfaceRow2">
            
            <div id = "messageUnderRow2"><b></div>
           
            
                <div id = "containsUpperButtons">
                    
                    <input id = "drawCardBtnUpper" type="button" value="Draw Card" onclick = "drawPlayerCardRow2(0)" >
                    <input id = "dealCardsBtn" type="button" value="Deal" >
                    <input id = "newRoundBtn" type="button" value="New Round" >
                    <input id = "wagerButtonOne" type="button" value="Wager 1" onclick="wager(1)" >
                    <input id = "wagerButtonFive" type="button" value="Wager 5" onclick="wager(5)" >
                    <input id = "wagerButtonFifteen" type="button" value="Wager 15" onclick="wager(15)" >
                    <input id = "wagerButtonTwentyfive" type="button" value="Wager 25" onclick="wager(25)" >
                <br><br>
                
                </div>

                

                
            
        </div>
    </div>
    <canvas id="canvasPlayer2" width="500" height="78" ></canvas>

    
        <div id = "messageLower" ><b>-</div>
    
        
           <br>
        <input id = "drawCardBtnLower" type="button" value="Draw Card" onclick = "drawPlayerCardRow3(0)"  >
        <input id = "split" type="button" value="Double Down" >
      
       
        
    

    </div>

 </div>   
    


    


<script>

function dummy()
{
  alert("dummy");
}


//amt of space between cards 
const CARDGAP = 70;
//five decks
const AMTOFCARDS = (52*5 - 1);


//make these buttons vague
document.getElementById('canvasPlayer2').style.visibility = 'hidden';
document.getElementById('messageLower').style.visibility = 'hidden';
document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
document.getElementById('split').style.visibility = 'hidden';

//first through third deals, the third deal is used for division
var canvasDealer = document.getElementById("canvasDealer");
let canvasPlayer1 = document.getElementById("canvasPlayer1");
let canvasPlayer2 = document.getElementById("canvasPlayer2");

let multiplierRow1 = -1;
let initialXRow1 = 150;
let dealerHandTotal = 0;
let clearRectFlag = false;
let isAllDelt = false;
let playerScoreRow2 = 0;
let playerScoreRow3 = 0;
let FirstDealIsDoneFlag = false; 
let SecondDealIsDoneFlag = false;

//hold aces for dealer, player one hand, and player one divided hand 
let AreThereAcesArrayRow = ["no ace","no ace","no ace","no ace" , "no ace","no ace","no ace","no ace" ,"no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace"]; 
let counterOfPressedDealerDrawBtn = 0;

//get the context to use canvas, is global
let ctx1 = canvasDealer.getContext("2d");



async function drawDealerCards(){

    

    //is set if deal has been busted, charlied, or black jacked - wouldn't need a dealers deal than
    if (FirstDealIsDoneFlag == true && SecondDealIsDoneFlag == true)
    {
        return (-1);
    }
    dealCardsBtn.disabled = true;
   


    document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
    drawCardBtnUpper.disabled = true;
    drawCardBtnLower.disabled = true;
    newRoundBtn.disabled = false;

    
    
    clearRectFlag = true;
    
    
   
   
   let counter = 0;
   //dealer hits until 17 or five cards
    while (dealerHandTotal < 17)
    {
        //counterOfPressedDealerDrawBtn++;
        counter++;
        if(counter == 6)
        {
            break;
        }
        multiplierRow1++;
        let mark  = getMarkOfCard();


        //for testing uncomment counterofpressed... and the first if and else if to test division
        //could also test charlie for example by changing first five values
        /////
        /*
        if (counterOfPressedDealerDrawBtn == 1 )
        {
            mark = "A";

        }
        else if (counterOfPressedDealerDrawBtn == 2)
        {

            mark = "2";
           
            
        }
        else if (counterOfPressedDealerDrawBtn == 3)
        {

            mark = "2";
           
            
        }

         if (counterOfPressedDealerDrawBtn == 4 )
        {
            mark = "2";

        }
        else if (counterOfPressedDealerDrawBtn == 5)
        {

            mark = "2";
           
            
        }
        else if (counterOfPressedDealerDrawBtn == 6)
        {

            mark = "2";
           
            
        }

        
        else if (counterOfPressedDealerDrawBtn == 7)
        {

            mark = "2";
           
            
        }
        */




    

        /////

       
        //these are the face cards
        if (mark == "Q" || mark == "K" || mark == "J" || mark == "10")
        {
            dealerHandTotal = dealerHandTotal + 10;
        }
        //thi is an ace
        else if (mark == "A")
        {
            dealerHandTotal = dealerHandTotal + 1;
        }
        //these are the number cards 2 - 9 (not one for ace)
        else
        {
            console.log("mark" , mark);
            dealerHandTotal = dealerHandTotal + parseInt(mark);
        }
        console.log("dealerHandTotal", dealerHandTotal);
        
        ctx1.beginPath();
        ctx1.fillStyle='red';
        //draws card's image
        ctx1.rect((initialXRow1) +  multiplierRow1 * CARDGAP, 7 , 50, 64);
        ctx1.stroke();

        ctx1.font = "50px Arial";


        //alignment for bigger card mark
        if(mark == "10"){
            //dras mark
            ctx1.fillText(mark, initialXRow1 + multiplierRow1 * CARDGAP-4,  60 );
        }
        else{
            ctx1.fillText(mark, initialXRow1 + multiplierRow1 * CARDGAP+10,  60 );
        }
        newRoundBtn.disabled = true;
        //pauses after each card - uncomment to use
        //await new Promise(dummy => { setTimeout(dummy, 1000); });
        newRoundBtn.disabled = false;

    }

    //if true, no need for deal, cards already busted, charlied, or blackjacked
    //row3
    if(SecondDealIsDoneFlag == false  && isThereASecondDeal)
    {
     
    
    //bust
    if (dealerHandTotal > 21)
    {
        //DEALER LOSES
        pointsHave = pointsHave + (pointsWagered);


        let text = "";
        if(pointsWagered > 1)
        {
            text = `BUST!  YOU WIN ${pointsWagered} POINTS`;
        }
        else
        {
            text = `BUST!  YOU WIN ${pointsWagered} POINT`;
        }
         //lowest message of two          
        document.getElementById("messageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;

        SecondDealIsDoneFlag = true;
        checkEndOfHands();

    }
    //playerscorerow3 will be under 21 , because would have already blackjacked
    //player wins by points
    else if (playerScoreRow3 > dealerHandTotal )
    {
        //PLAYER WINS
        pointsHave = pointsHave + (pointsWagered);


        let text = "";
        if(pointsWagered > 1)
        {
            text = `YOU WIN!  ${pointsWagered} POINTS`;
        }
        else
        {
            text = `YOU WIN!  ${pointsWagered} POINT`;
        }
        //lowest of two messages 
        document.getElementById("messageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
        SecondDealIsDoneFlag = true;
        checkEndOfHands();
    }
    //already checked dealer hand greater than 21, so this score means dealer wins by tie or better score
    //both are less than 21
    else if(playerScoreRow3 <= dealerHandTotal) 
    {
        //DEALER WINS
        pointsHave = pointsHave - (pointsWagered);

        let text = "";
        if(pointsWagered > 1)
        {
            text = `YOU LOSE!  ${pointsWagered} POINTS`;
        }
        else
        {
            text = `YOU LOSE!  ${pointsWagered} POINT`;
        }

        //bottom most text, there are two spots
        document.getElementById("messageLower").textContent = text;
        let text2 = `${pointsHave}`;
        document.getElementById("scoreAtTop").textContent = text2;
        SecondDealIsDoneFlag = true;
        checkEndOfHands();


    }
    }
   
    //player didn't bust, charlie, or blackjack, so needs to check against deakers deal
    if (FirstDealIsDoneFlag  == false  )
    {
    
            
    
    
     if(dealerHandTotal > 21)
        {
                    //DEALER BUSTS
                    pointsHave = pointsHave + pointsWagered;

                   

                    let text = "";
                    if(pointsWagered > 1)
                    {
                        text = `BUST!  YOU WIN ${pointsWagered} POINTS`;
                    }
                    else
                    {
                        text = `BUST!  YOU WIN ${pointsWagered} POINT`;
                    }

                    

                    //upper message, of two.
                    document.getElementById("messageUnderRow2").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    console.log("BUST!");
                    FirstDealIsDoneFlag = true;
                    
                    checkEndOfHands();
 
        }
            
        

    ////////////

        //already checked dealer is therefor less than 21 and has more points than player
        else if(dealerHandTotal >= playerScoreRow2  )
        {
                    //DEALER WINS
                    pointsHave = pointsHave - pointsWagered;


                    let text = "";
                    if(pointsWagered > 1)
                    {
                        text = `YOU LOSE ${pointsWagered} POINTS`;
                    }
                    else
                    {
                        text = `YOU LOSE ${pointsWagered} POINT`;
                    }

                    //upper message of two
                    document.getElementById("messageUnderRow2").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    //console.log("BUST!");
                    FirstDealIsDoneFlag = true;
                    
                    checkEndOfHands();
 
        }



    ///////////

    //player is under 21, because didn't score blackjack before cards dealt
    //delaer is less than 21 to
    else if(dealerHandTotal < playerScoreRow2 )
        {   
                    //PLAYER WINS       
                    pointsHave = pointsHave + pointsWagered;

                   
                    let text = "";
                    if(pointsWagered > 1)
                    {
                        text = `YOU WIN ${pointsWagered} POINTS`;
                    }
                    else
                    {
                        text = `YOU WIN ${pointsWagered} POINT`;
                    }


                    //upper message of two
                    document.getElementById("messageUnderRow2").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    console.log("BUST!");
                    FirstDealIsDoneFlag = true;
                    
                    checkEndOfHands();
 
        }

    }
    //////////////

    
    isAllDelt = true;
    
    
    multiplierRow1 = -1;
   
    dealerHandTotal = 0;
    
    dealCardsBtn.disabled = true;

}




//initial points
let pointsHave = 30;
let pointsWagered = 0;
//temporary for testing split
let globvar = 1;


//did press devide button
let  gWasASplitFlag = false;
//to position multiple cards
let multiplierRow2 = -1;
//offset
let initialXRow2 = 150;
//initial setting
let counterAcesRow = -1;
let numberOfIterationsRow2 = 0;
let numberOfCardsDeltRow2 = 0;

let isThereASecondDeal = false;
//holds summed values with aces counting as one
let alternateHandForCharlieRow2 = 0;

//used for testing
let counterOfPressedUpperDrawBtn = 0;
//canvas context
let ctx2 = canvasPlayer1.getContext("2d");

let IsDoubleDownRow2Flag = false;
//a count of two sets up divide hand
let tenCounter = 0;
let IsASplitFlag = false;

//checks this and alters mid messsgae display - complete!!!
//this is the second row of cards, first being the dealers
//and last being the divided hand when applicable
function drawPlayerCardRow2(mark)
{
    //for debugging
    counterOfPressedUpperDrawBtn++;
    
    
    numberOfIterationsRow2++;
    
    
    
    document.getElementById('split').style.visibility = 'hidden';
    
   
    

   
    if (clearRectFlag == true)
    {

        
        document.getElementById('messageLower').style.visibility = 'hidden';
        document.getElementById('canvasPlayer2').style.visibility = 'hidden';
        document.getElementById('drawCardBtnLower').style.visibility = 'hidden';
        document.getElementById('split').style.visibility = 'hidden';



        //clear sthe two canvases for dealers deal and players regular deal
        ctx1.clearRect(0,0,1000,78);
        ctx2.clearRect(0,0,1000,78);

        clearRectFlag = false;
    }
   
    multiplierRow2++;
    
        //left for any need to test, for testing divide, uncomment first two conditions and value above with ++
        /*
        if (counterOfPressedUpperDrawBtn == 1 )
        {
            mark = "10";

        }
        else if (counterOfPressedUpperDrawBtn == 2)
        {

            mark = "10";
           
            
        }
        
        
        else if (counterOfPressedUpperDrawBtn == 3)
        {

            mark = "5";
           
            
        }
        
        
        else if (counterOfPressedUpperDrawBtn == 4)
        {

            mark = "A";
           
            
        }
        
        
        else if (counterOfPressedUpperDrawBtn == 5)
        {

            mark = "2";
           
            
        }
        else if (counterOfPressedUpperDrawBtn == 6)
        {

            mark = "2";
           
            
        }
        */
        //else
        //{
            mark = getMarkOfCard();
        //}
    

        
        
    //draw the card, graphically
    ctx2.beginPath();
    ctx2.fillStyle='blue';
    ctx2.rect((initialXRow2) +  multiplierRow2 * CARDGAP, 7 , 50, 64);
    
    ctx2.stroke();
    ctx2.font = "50px Arial";
   
    //devide button press
    if(IsASplitFlag)
    {
        //change this variable because a ten was divided to row3
        alternateHandForCharlieRow2 = alternateHandForCharlieRow2 - 10;
        IsASplitFlag = false;
    }
    
    //face cards
    if (mark == "Q" || mark == "K" || mark == "J" || mark == "10")
    {
        
        numberOfCardsDeltRow2++;
        
        if(mark == "10" && (numberOfIterationsRow2 == 1 || numberOfCardsDeltRow2 == 2))
        {
            tenCounter++;
        }
        
        playerScoreRow2 = playerScoreRow2 + 10;
        alternateHandForCharlieRow2 = alternateHandForCharlieRow2 + 10;

        
    }
    //ace
    else if (mark == "A")
    {
        numberOfCardsDeltRow2++;
        counterAcesRow = counterAcesRow + 1;
        //can be changed to a one value later
        playerScoreRow2 = playerScoreRow2 + 11;
        //sets this to allow changing an ace to one in row 2 
        AreThereAcesArrayRow[counterAcesRow] = "is row2 ace";
        alternateHandForCharlieRow2 = alternateHandForCharlieRow2  + 1;
    }
    //number cards 2-9 : no one because is ace
    else
    {
        playerScoreRow2 = playerScoreRow2 + parseInt(mark);
        numberOfCardsDeltRow2++;
        alternateHandForCharlieRow2 = alternateHandForCharlieRow2 + parseInt(mark);
    }



    //important logs for testing
    console.log("playerScoreRow2" , playerScoreRow2);
    console.log("numberOfCardsDeltRow2 ", numberOfCardsDeltRow2 );
    console.log("numberOfCardsDeltRow3 ", numberOfCardsDeltRow3 );
    console.log("alternateHandForCharlieRow2", alternateHandForCharlieRow2 );


    console.log("nc2 ", numberOfCardsDeltRow2);
    console.log("nc3 ", numberOfCardsDeltRow3);


    //there is no divide and two cards have been played
    if (numberOfCardsDeltRow2 == 2 && numberOfCardsDeltRow3 == 0)
    {
        dealCardsBtn.disabled = false;
       
    }
    //if there is two upper cards the valuem of numberofcardsrpw2 is 3, because the first card that is divided to numberofcardsdeltrow3 is counted
    //(both values have two cards and are ready for dealing)
    else if(numberOfCardsDeltRow2 > 2 && numberOfCardsDeltRow3 > 1  )
    {
        dealCardsBtn.disabled = false;
    }
    

    //two cards dealt and both are ten with one displayed
    if(tenCounter == 2)
    {   
        
        
        document.getElementById('split').style.visibility = 'visible';
        tenCounter = 0;
    }
    else
    {
        document.getElementById('split').style.visibility = 'hidden';

    }
        

    
    //5 cards wins, alternatehandforcharlie is a count with aces counting 1 not 11.
    if(alternateHandForCharlieRow2 < 22 && numberOfCardsDeltRow2 == 6)
    {
        //dealCardsBtn.disabled = true;
        console.log("5 Card Charlie");
        pointsHave = pointsHave + (pointsWagered);

        let text = "";
        if(pointsWagered > 1)
        {
            text = `5 CARDS!  YOU WIN ${pointsWagered} POINTS`;
        }
        else
        {
            text = `5 CARDS!  YOU WIN ${pointsWagered} POINT`;
        }
        
        //top of two messages
        document.getElementById("messageUnderRow2").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        FirstDealIsDoneFlag = true;
        //checks for deals done to display buttons
        checkEndOfHands();
        
    }

   

    
    //if ace and over 21 change next ace to 1
    else if (playerScoreRow2 > 21)
    {
        for(let i = 0 ; i < 4*5; i++)
        {
                if(AreThereAcesArrayRow[i] == "is row2 ace")
                {
                    AreThereAcesArrayRow[i] = "used ace";
                    playerScoreRow2 = playerScoreRow2 - 10;
                    break;
                }
        }
    }
        
        //plyer scores over 21, so busts
        if(playerScoreRow2 > 21)
        {
                      
                    //dealCardsBtn.disabled = true;
                    pointsHave = pointsHave - pointsWagered;


                    let text = "";
                    if(pointsWagered > 1)
                    {
                        text = `BUST!  YOU LOSE ${pointsWagered} POINTS`;
                    }
                    else
                    {
                        text = `BUST!  YOU LOSE ${pointsWagered} POINT`;
                    }
                   



                    //top of two messages
                    document.getElementById("messageUnderRow2").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    console.log("BUST!");
                    FirstDealIsDoneFlag = true;
                    //check for firstdealisdoneflag to change display buttons
                    checkEndOfHands();
 
        }
            
        
    
    
    //player scores blackjack
    else if(playerScoreRow2 == 21)
    {
       
        //dealCardsBtn.disabled = true;
        pointsHave = pointsHave + (pointsWagered*2)

        let text = `BLACKJACK!  YOU WIN ${pointsWagered*2} POINTS`;
        //top of two messages
        document.getElementById("messageUnderRow2").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave; 
        FirstDealIsDoneFlag = true;
        
         
        //dealCardsBtn.disabled = false;
        drawCardBtnUpper.disabled = true;
        
        //check for firstdealisdoneflag to change display buttons
        checkEndOfHands();
    }

    


    //size of mark needs to be centerd on card
    if(mark == "10"){
        ctx2.fillText(mark, initialXRow2 + multiplierRow2 * CARDGAP-4,  60 );
    }
    else{
        ctx2.fillText(mark, initialXRow2 + multiplierRow2 * CARDGAP+10,  60 );
    }

   

}


//controls the spacing of the cards
let multiplierRow3 = -1;
//controls the original offset of cards
let initialXRow3 = 150;
//let playerScoreRow3 = 0;
let totalCardsDeltRow3 = 0;
let numberOfIterationsRow3 = 0;
//let counterAcesRow = 0;
let numberOfCardsDeltRow3 = 0;
//aces are counted as one always
let alternateHandForCharlieRow3 = 0;
let counterOfPressedLowerDrawBtn = 0;

//graphical context
let ctx3 = canvasPlayer2.getContext("2d");



//this is the 3rd row of cards for dividing two tens
function drawPlayerCardRow3(mark)
{
    //used for debugging differen set marks
    counterOfPressedLowerDrawBtn++;
    numberOfCardsDeltRow3++;
    isThereASecondDeal = true;
    numberOfIterationsRow3++;






if(mark === 0){
    //gets value of card
    mark  = getMarkOfCard();
}

////left this for any need of testing to set cards with values that take place of mark

    /*
        if (counterOfPressedLowerDrawBtn == 1 )
        {
            mark = "10";

        }
        else if (counterOfPressedLowerDrawBtn == 2)
        {

            mark = "5";
           
            
        }
        else if (counterOfPressedLowerDrawBtn == 3)
        {

            mark = "A";
           
            
        }
        /*
        else if (counterOfPressedLowerDrawBtn == 4)
        {

            mark = "2";
           
            
        }
        else if (counterOfPressedLowerDrawBtn == 5)
        {

            mark = "2";
           
            
        }
        else if (counterOfPressedLowerDrawBtn == 6)
        {

            mark = "2";
           
            
        }
        */



/////

   
        document.getElementById('messageLower').style.visibility = 'visible';
        document.getElementById('canvasPlayer2').style.visibility = 'visible';
        document.getElementById('drawCardBtnLower').style.visibility = 'visible';
        
   
    multiplierRow3++;
    
    ctx3 = canvasPlayer2.getContext("2d");
    //graphically draws card
    ctx3.beginPath();
    ctx3.fillStyle='blue';
    ctx3.rect((initialXRow3) +  multiplierRow3 * CARDGAP, 7 , 50, 64);
   
    ctx3.stroke();
    ctx3.font = "50px Arial";
    
    //a ten valuedf card: queen, king, jack, or ten 
    if (mark == "Q" || mark == "K" || mark == "J" || mark == "10")
    {
        totalCardsDeltRow3++;
        playerScoreRow3 = playerScoreRow3 + 10;
        
        alternateHandForCharlieRow3 = alternateHandForCharlieRow3 + 10;


    }
    //an ace
    else if (mark == "A")
    {
        totalCardsDeltRow3++;
        counterAcesRow = counterAcesRow + 1;
        playerScoreRow3 = playerScoreRow3 + 11;
        //holds aces in array for row3
        AreThereAcesArrayRow[counterAcesRow] = "is row3 ace";
        
        //value of hand with all aces counted as 1.
        alternateHandForCharlieRow3 = alternateHandForCharlieRow3 + 1;
    }
    //number 2 - 9 , one is not counted because it is an ace
    else
    {
        playerScoreRow3 = playerScoreRow3 + parseInt(mark);
        totalCardsDeltRow3++;
        alternateHandForCharlieRow3 = alternateHandForCharlieRow3 + parseInt(mark);

        
    }



    //if there is two upper cards the valuem of numberofcardsrpw2 is 3, because the first card that is divided to numberofcardsdeltrow3 is counted;
    //(both values have two cards and are ready for dealing)
    if(numberOfCardsDeltRow2 > 2 && numberOfCardsDeltRow3 > 1  )
    {
        dealCardsBtn.disabled = false;
    }


   
   
    //handd wins becaues it is five cards and isn't over 21
    if(alternateHandForCharlieRow3 < 22 && numberOfCardsDeltRow3 == 5)
    {
       
        console.log("5 Card Charlie");
        pointsHave = pointsHave + (pointsWagered);

        
        let text = "";
        if(pointsWagered > 1)
        {
            text = `5 CARDS!  YOU WIN ${pointsWagered} POINTS`;
        }
        else
        {
            text = `5 CARDS!  YOU WIN ${pointsWagered} POINT`;
        }

        let text2 = `Total Points: ${pointsHave}.`;
        //lowest of two messages
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave;
        SecondDealIsDoneFlag = true;
       
        
        //checks for done flags and alters display of buttons
        checkEndOfHands();
        
        
    }
    
    //check if hand has any aces becaue the hand is over 21, if so change 11 value to 1 
    else if (playerScoreRow3 > 21)
    {
        console.log("playerScoreRow3a", playerScoreRow3);
    
        for(let i = 0 ; i < 4*5; i++)
        {
                if(AreThereAcesArrayRow[i] == "is row3 ace")
                {
                    AreThereAcesArrayRow[i] = "used ace";
                    playerScoreRow3 = playerScoreRow3 - 10;
                    
                    break;
                }
        }
    }


    
    
        //player scores over 21, so player busts and loses
        if(playerScoreRow3 > 21)
        {
           
                   
                    pointsHave = pointsHave - pointsWagered;

                    let text = "";
                    if(pointsWagered > 1)
                    {
                        text = `BUST!  YOU LOSE ${pointsWagered} POINTS`;
                    }
                    else
                    {
                        text = `BUST!  YOU LOSE ${pointsWagered} POINT`;
                    }

                    //lowest of two messages
                    document.getElementById("messageLower").textContent = text;
                    document.getElementById("scoreAtTop").textContent = pointsHave; 
                    
                    console.log("BUST!");
                    SecondDealIsDoneFlag = true;
                   
                    //checks for done flags and alters display of buttons
                    checkEndOfHands();
 
        }
            
        
    
    
    //player scores over 21, so busts and player loses
    else if(playerScoreRow3 == 21)
    {
        
        //score
        pointsHave = pointsHave + (pointsWagered*2);


        let text = `BLACKJACK!  YOU WIN ${pointsWagered*2} POINTS`;
        //lowest of two messages
        document.getElementById("messageLower").textContent = text;
        document.getElementById("scoreAtTop").textContent = pointsHave; 
        SecondDealIsDoneFlag = true;
        
        //checks for done flags and alters display of buttons
        checkEndOfHands();
    }


    //different fit on card when certain numbers
    if(mark == "10"){
        ctx3.fillText(mark, initialXRow3 + multiplierRow3 * CARDGAP-4,  60 );
    }
    else{
        ctx3.fillText(mark, initialXRow3 + multiplierRow3 * CARDGAP+10,  60 );
    }

}



//on start, these buttons are disabled, wage buttons will be false (not disabled)
function setsUpGame()
{
    
   
    newRoundBtn.disabled = true;
    drawCardBtnUpper.disabled = true;
    dealCardsBtn.disabled = true;
    drawCardBtnUpper.disabled = true;

    
}

//if indexed value is 1 than the card has been used in the next array
let deckUseage = 
[
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0


];

//five decks of 52 cards each
let decks = 
[
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",

"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10", 
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"A", "Q", "K", "J", "2", "3", "4", "5", "6", "7", "8", "9", "10"
];






//finds a card as long as at least one card remains  - shuffle resets deck when over half way of cards
function getMarkOfCard()
{
    //used to determine direction of search for a card
    let flagFoundCard = false;

    
    let randomNumber = new Math.seedrandom();

    
    //random number is between 0 and 1
    randomNumber = randomNumber();
    //changes value to 0-259
    let betweenZeroand259 = randomNumber * 259;
    
   //removes decimal part of number
    index = Math.trunc(betweenZeroand259);

   
    

    //if is available value use it, otherwise search towards zero for first available card
    let i = 0;
    if(deckUseage[index] == 0)
    {
        deckUseage[index] = 1;
        return (decks[index]);
    }
    else
    {
        for(i = index - 1; i >= 0; i-- )
        {
            if (deckUseage[i] == 0)
            {
                deckUseage[i] =  1;
                flagFounCard = true;
                break;
            }
            

        }
        
        //search incrementally, for next available card
        if (flagFoundCard == false)
        {
            for(i = index + 1 ; i < AMTOFCARDS-1 ; i++)
            {
                if (deckUseage[i] = 0)
                {
                    deckUseage[i] = 1;
                    break;
                }
            }
        }

        

        
    }
   
return (decks[i]);
}
 
function wager(points_Wagered){
//not enough points to make wager
if(points_Wagered > pointsHave)
{
    return(1);
}
pointsWagered =  points_Wagered;

//makes upper draw button showing and make all waging button not showing
drawCardBtnUpper.disabled = false;
wagerButtonOne.disabled=true;
wagerButtonFive.disabled=true;
wagerButtonFifteen.disabled=true;
wagerButtonTwentyfive.disabled=true;

}


function onDivideHand(){
   
   
    
    IsASplitFlag = true;
    WasASplitFlag = true;

    //sets up buttons visiblity
    document.getElementById('split').style.visibility = 'hidden';
    document.getElementById('canvasPlayer2').style.visibility = 'visible';
    document.getElementById('messageLower').style.visibility = 'visible';

    document.getElementById('drawCardBtnLower').style.visibility = 'visible';
    dealCardsBtn.disabled = true;
    
    drawCardBtnLower.disabled =  false;
    
    isThereASecondDeal = true;
    //for draeing both decks wgeb split button was pressed
    drawPlayerCardRow3("10");
    IsDoubleDownRow2Flag = true;
    multiplierRow2--;
    ctx2.clearRect((initialXRow1 +  (1 * CARDGAP) - 1),0,1000,78);
    playerScoreRow2 = playerScoreRow2 - 10;
    
    
}

//reset all values to initial state for next new round
function newRound(){


//temporary for testing split
 globvar = 1;
 
//clears all 3 canvases
 ctx1.clearRect(0,0,1000,78);
 ctx2.clearRect(0,0,1000,78);
 ctx3.clearRect(0,0,1000,78);
 
 
 //messageLower.disabled = true;
 //messageUnderRow2.disabled = true;
 
 newRoundBtn.disabled = true;
 
 //clears out messages
 document.getElementById('messageLower').textContent  = "";
 document.getElementById('messageUnderRow2').textContent= "";

//shoes wagers
wagerButtonOne.disabled=false;
wagerButtonFive.disabled=false;
wagerButtonFifteen.disabled=false;
wagerButtonTwentyfive.disabled=false;
 
 //for spacing cards
 multiplierRow1 = -1;
 //offset for cards
 initialXRow1 = 150;//
 dealerHandTotal = 0;
 //reset
 clearRectFlag = false;
 isAllDelt = false;
 //reset round's scores
 playerScoreRow2 = 0;
 playerScoreRow3 = 0;
 //four aces, times 5 decks
 
 //this stays instead
 //pointsHave = 30;
 pointsWagered = 0;
 
 
 gWasASplitFlag = false;
 //for spacing cards
 multiplierRow2 = -1;
 //initial card offset
 initialXRow2 = 150;
 counterAcesRow = -1;
 numberOfIterationsRow2 = 0;
 numberOfCardsDeltRow2 = 0;
 
 isThereASecondDeal = false;
//for spacing cards
 multiplierRow3 = -1;
 //card offset
 initialXRow3 = 150;
//let playerScoreRow3 = 0;
 totalCardsDeltRow3 = 0;
 numberOfIterationsRow3 = 0;

 counterAcesRow = 0;

 FirstDealIsDoneFlag = false;
 SecondDealIsDoneFlag = false;

 isThereASecondDeal = false;
 numberOfCardsDeltRow3 = 0;

 //summed score with aces equal to one
 alternateHandForCharlieRow2 = 0;
 alternateHandForCharlieRow3 = 0;
 IsDoubleDownRow2Flag = false;

 //for debugging, when equals two snippet run 
 tenCounter = 0;
 //these 3 are for testing ith specific cards
 counterOfPressedUpperDrawBtn  = 0;
 counterOfPressedLowerDrawBtn = 0;
 counterOfPressedDealerDrawBtn = 0;
 
 //a reminder of starting initialization
 //AreThereAcesArrayRow = ["no ace","no ace","no ace","no ace" , "no ace","no ace","no ace","no ace" ,"no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace","no ace"]; 

 //clear aces in aray so next ahnd has no useable aces yet
for(let i = 0 ; i < 4*5; i++)
{
    if(AreThereAcesArrayRow[i] == "is row2 ace" || AreThereAcesArrayRow[i] == "is row3 ace")
    {
        AreThereAcesArrayRow[i] = "used ace";
        
        
    }
}

shuffleTheDeck();

}

function playWave()
{
    const music = new Audio('adf.wav');
    
    music.play();
}

//changes bttons depending on if either flag was set for: blackjack,player bust, or five card charlie.
//Works for both row2 and row3, sets buttons.
function checkEndOfHands()
{
    if(isThereASecondDeal)
    {
      
        console.log("a", FirstDealIsDoneFlag);
        console.log("b,", SecondDealIsDoneFlag);
        console.log("c", IsDoubleDownRow2Flag);
        
        
        //2nd time through this will be true
        if (FirstDealIsDoneFlag && SecondDealIsDoneFlag && IsDoubleDownRow2Flag)
        {
            newRoundBtn.disabled = false;
            drawCardBtnLower.disabled = true;
            drawCardBtnUpper.disabled = true;
            dealCardsBtn.disabled = true;
            
        }
        


        //first player hand complete before seconddealisdoneflag
        else if (FirstDealIsDoneFlag)
        {
            
            
            
                //drawCardBtnLower.disabled = false;
                drawCardBtnUpper.disabled = true;
                drawCardBtnLower.disabled = false;
                
                
                
        }
        
        // second player hand completed before firstdealisdoneflag
        else if(SecondDealIsDoneFlag)
        {
               
        
                //upper button shows
                drawCardBtnUpper.disabled =false;
                //bottom button hidden
                drawCardBtnLower.disabled = true;
               
        }
        


    }
    //only one deal, not row 3 (divided deal)
    else if(!isThereASecondDeal)
    {
        
    
        if (FirstDealIsDoneFlag == true)
        {
            drawCardBtnUpper.disabled = true;
            newRoundBtn.disabled = false;
            dealCardsBtn.disabled = true;

           
            
        }
    }

}

//called with timeout - keep
function shuffleTheDeck2()
{
    
}


//sets all card usages to zero
async function shuffleTheDeck()
{
    //uncertain if useable:
    //document.getElementById("drawCardBtnUpper").removeEventListener("click", drawPlayerCardRow2);
    //document.getElementById("dealCardsBtn").removeEventListener("click", drawDealerCards);
    //document.getElementById("split").removeEventListener("click", onDivideHand);
    //document.getElementById("newRoundBtn").removeEventListener("click", newRound);

    document.getElementById('title').textContent = "Shuffling The Deck...";


    //set deck to unused
    deckUseage = 
[
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,

0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0


];


//turn off buttons, wait with messages, reshow original message, and turn on wager buttons
wagerButtonOne.disabled=true;
wagerButtonFive.disabled=true;
wagerButtonFifteen.disabled=true;
wagerButtonTwentyfive.disabled=true;
//await new Promise(shuffleTheDeck2 => { setTimeout(shuffleTheDeck2, 1500); });
let text = "BLACKJACK 5 card dealer";
document.getElementById('title').textContent = text;
wagerButtonOne.disabled=false;
wagerButtonFive.disabled=false;
wagerButtonFifteen.disabled=false;
wagerButtonTwentyfive.disabled=false;
    
}





setsUpGame();

//document.getElementById("drawCardBtnUpper").addEventListener("click", drawPlayerCardRow2);
document.getElementById("dealCardsBtn").addEventListener("click", drawDealerCards);
document.getElementById("split").addEventListener("click", onDivideHand);
document.getElementById("newRoundBtn").addEventListener("click", newRound);

</script>

</body>

</html>